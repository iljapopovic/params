def wait_until_next_half_hour():
    now = datetime.now()
    next_intervals = []
    next_intervals.append(now.replace(minute=0, second=0, microsecond=0))
    next_intervals.append(now.replace(minute=30, second=0, microsecond=0))
    next_intervals.append(now.replace(minute=0, second=0, microsecond=0) + timedelta(hours=1))
    next_intervals.append(now.replace(minute=30, second=0, microsecond=0) + timedelta(hours=1)) # ovaj je visak, ali ok

    next_interval = now + timedelta(hours=1)
    for i in next_intervals:
        if i < next_interval and i > now :
            next_interval = i
    wait_seconds = (next_interval - now).total_seconds()
    print(f"Waiting for {int(wait_seconds)} seconds until the next half hour ({next_interval.strftime('%H:%M:%S')})...")
    time.sleep(wait_seconds)
